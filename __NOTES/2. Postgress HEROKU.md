# For a production datbase we re going to use PostgreSQL deployed on Heroku

LOGIN TO HEROKU FIRST; GGO TO /apps

MAKE A NEW APP (YES WVEN E WNT TO CREATE DATABASE, YOU NEED TO CREATE A HEROKU APP) (MAKE SURE THAT YOUR NAME IS GLOBALLY UNIQUE)

YOU SHOULD BE IN APPS DASBOARD

# LETS MAKE A CLOUD POSTGRES INSTANCE

IN THE PROJECT DASBOARD GO TO `Resources` TAB

SEARCH INSIDE `Add-ons` FIELD; TYPE `"postgres"`

**YOU SHOULD SEE `Heroku Postgres`**; **Click on that**

OFCOURSE IF YOU DON'T WANT TO PAY; YOU PICK UP `Hobby developer program`

THIS WILL CREATE INSTANCE OF POSTGRES ON SOME AMAON SERVER (HEROKU USES AMAZON INFRASTRUCTURE)

## CONNECTION URI FOR YOUR DATABASE

CLICK ON YOUR DATBASE

GO TO TAB: `Settings`

THEN GO TO `view Credentials`

YOU SHOULD SEE THE `URI`

COPY THAT AND PAT IT TO `.env.production` (I WANT TO USE THIS DATBASE AS A PRODUCTION ONE)

# BUT CREDENTIALS ARE NOT PERMANENT

SO IT CAN HAPPEN THAT HEROKU ALL OF A UDEN CHANGES YOUR CONNECTIO NSTRING; AND YOU NEED TO GO BACK TO SAME PLACE AND COPY MENTIONED URL

# IN CASE OF HEROKU; WE NEED TO CREATE ONE MORE DATBASE THAT IS GOING TO BE SHADOE DATBASE INTENDED FOR prisma MIGRATIONS

YOU JUST NEED TO DO THIS WITH HEROKU; BECAUSE IT DOESN'T ALLOW YOU TO CREATE THAT MIGRATIONS DATBASE ON THE FLY, UNLIKE OTHER SERVICES I TRIED (WELL I ONLY USED ONE SERVICE AND THAT WAS SUPABASE WHERE YOU DON'T NEED TO SET UP ANOTHER DATABASE)

ALSO IN CASE OF DOCKER INSTANCE OF POSTGRES; YOU **DON'T NEED A SECOND DATABASE**

**SO MAKE ANOTHER POSTGRESS INSTANCE ON HEROKU** (**DO IT FOR THE SAME HEROKU APP WE BUILT**)

**ALSO SINCE WE NEED TO SPECIFY SHADOW DATBASE URL INSIDE OUR PRISMA SCHEMA, THAT ALSO MENAS THAT OUR DEVELOPMENT DATBASE IS GOING TO USE HEROKUS POSTGRES AS A SHADOW DATBASE**

***

FOR PRODUCTION, YOU MAY NOT NEED A SECOND DATBASE, BUT SET IT ANYWAYS; BUT IT IS A GOOD CHANCE THAT IT WON'T BE USED IN PRODUCTION

***

# SINCE I HAVE BUNCH OF ENVIROMENT VIRIABLES FILES; I'M USING `dotenv` PACKAGE TOGETHER WITH PRISMA COMMANDS

PACKAGE I DID INSTALL GLOBALY, BECAUSE I DON'YT NEED THAT CLI TOOL TI BE INSTALLED FOR THE PROJECT AS DEV DEPENDANCY, SINCE MIGRATIONS, PUSHING, SEEDING, RESETING TO THE DATABASE DON'T HAPPEN AT BUILD TIME OR RUNTIME; I RUN THEM WHEN I WANT TO DEAL WITH PRISMA AND DATBASE; MY NEXTJS APP DOESN'T NEED TO KNOW NOTHING ABOUT THAT; SHE IS JUST A CONSUMER OF DATBASE, NO MATTER IT IS QUERYING OR MUTATING

SO YOU WILL SEE BUNCH OF SCRIPTS IN MY package.json FILE THAT ARE JUST THERE AS A HELPER FOR DEALING WITH PRODUCTION OR DEVELOPMENT DATBASE